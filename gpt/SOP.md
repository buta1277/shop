# gpt/SOP.md（只做计划/规范/审阅的项目协作流程）

> 目的：约束在**不改代码**前提下的协作方式，确保输出聚焦“计划、规范、审阅”。  
> 适用范围：产品/设计/开发/运营在进入实现前的准备阶段；仅产出文本文档、表格与截图说明。

---

## 1) 建任务卡（引用 `gpt/tasks/TEMPLATE.yml` 字段）

- 必填字段：`title`、`date`、`scope.pages`、`scope.files_blocked`、`goal[]`、`acceptance_criteria[]`、`inputs[]`、`deliverables[]`、`risk_notes`。  
- 流程：
  1. 复制 `gpt/tasks/TEMPLATE.yml` → 新建 `gpt/tasks/<短名>-<YYYYMMDD>.yml`。
  2. 按模板逐项填写（仅文本），不得含执行脚本或指令。
  3. 通过评审后再进入“准备/刷新上下文”。

**验收要点（示例）**
- 目标与验收标准可量化、可截图对比。
- `files_blocked` 覆盖主题关键目录，确保“零改动”红线。
- `risk_notes` 同时包含：影响范围 / 回滚方案 / 自测清单。

---

## 2) 准备/刷新上下文（本项目常用文档类型）

- **仓库结构与首页装配**：`gpt/contexts/overview.md`
- **配置键快照（15–30项）**：`gpt/contexts/config-keys.md`
- **首页梳理与依赖图**：`gpt/contexts/home-index-audit.md`（如需新增）
- **协作约定**：`gpt/README.md`
- **任务卡**：`gpt/tasks/*.yml`
- （可选）**截图包与注释**：`docs/screenshots/<date>/...`

> 要求：若上下文存在“待核实”，需在任务卡 `inputs` 中点名引用，避免误用。

---

## 3) 选择合适的 prompts（仅描述“输出结构”）

> 说明：本阶段只定义**产出物结构**，不执行任何代码或提出改动指令。

### 3.1 i18n 抽取（文案与键名对齐）
**输出结构**
- 清单表：`原文案` / `建议 key` / `出现位置（文件/section）` / `优先级` / `备注`
- 对齐说明：命名前缀规范（如 `color_*`, `enable_*`）
- 风险提示：与 `locales` 现有键冲突清单

### 3.2 未使用资源清理（仅清点，不删除）
**输出结构**
- 资源盘点表：`路径` / `类型（css/js/img/svg）` / `引用证据（无则标注疑似）` / `建议处理` / `风险说明`
- 采样方法：搜索与交叉验证步骤（文本说明）
- 回滚准备：若后续进入实现，需要的备份策略（文本）

### 3.3 代码审阅与风险评估（不改代码）
**输出结构**
- 依赖图：`templates → sections → snippets/assets → locales/config`（文字/示意图）
- 风险列表：`位置` / `问题类型（可访问性/性能/耦合）` / `证据` / `建议（文本）`
- 影响范围与回滚方案：文字化说明
- 自测清单：可被人工逐项打勾的核对表

---

## 4) 产出落到项目文档 → 人工审核通过 → （实现阶段此处不展开）

- 将产出物保存至：
  - `gpt/contexts/`（概览、配置、审阅报告）
  - `gpt/tasks/`（任务卡）
  - `docs/`（截图与附录）
- 发起**文档评审**（无代码 PR 亦可），至少 1 名负责人过目签字。
- 审核通过后，若需进入实现，另开实现任务卡；本 SOP 不覆盖实现阶段。

---

## 5) 固定的自检清单（不涉及任何代码变更）

- [ ] 所有交付物均为**文本/图片**，未包含可执行脚本或改动指令  
- [ ] 明确“不动项”：`assets/layout/sections/snippets/templates/locales/config/blocks`  
- [ ] 每条建议均附：**影响范围/回滚方案/自测清单**  
- [ ] 多语言：新增/调整的文案均给出**建议 key** 与翻译占位  
- [ ] 依赖图已更新且标注日期与版本  
- [ ] 配置键快照控制在 **15–30 项**，默认值来源已标注（或“待核实”）  
- [ ] 截图与文件命名含日期、版本号，可追溯

---

**下一步建议（仍为准备，不做改动）**
- 以 `TEMPLATE.yml` 建立本周任务卡（只填文本）。
- 刷新 `gpt/contexts/config-keys.md` 的“待核实”默认值来源。
- 输出首页梳理表与依赖图 v1，安排一次纯文档评审会。
